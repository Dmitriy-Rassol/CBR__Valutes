(()=>{"use strict";!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}();const e="https://www.cbr-xml-daily.ru/daily_json.js";let t,n;async function s(s){let l=await fetch(e),i=await l.json(),c=i.PreviousURL,o=[];o.push(`http:${c}`);for(let e=1;e<10;e++)l=await fetch(c),i=await l.json(),c=i.PreviousURL,o.push(`http:${c}`);!function(e,s){e.reverse().forEach((e=>{fetch(e).then((e=>e.json())).then((e=>{let l=e.Date.slice(0,10).split("-").reverse().join("."),i=e.Valute;for(const e in i){let c=i[e];const{CharCode:o,Name:d,Previous:r,Value:p,ID:u}=c;if(s.id==u){p>r?(t="down",n="&#9660;"):p<r?(t="up",n="&#9650;"):(t="",n="");const e=document.createElement("li");e.className="list-item list-item__select hidden",e.dataset.id=u;let i=(100*(r/p-1)).toFixed(2);e.innerHTML=`\n                        <div class="valute">${o} <span class="prev-date">${l}</span></div>\n                        <div class="value">${p}<span class="sign"></span></div>\n                        <div class="percent">${i}% <span class="sign ${t}">${n}</span></div>\n                        <span class="tooltiptext">${d}</span>\n                        `,s.insertAdjacentElement("afterend",e),a(e)}}}))}))}(o,s)}function a(e){e.addEventListener("mousemove",(e=>{let t=document.querySelectorAll(".tooltiptext"),n=e.pageX+"px",s=e.pageY+30+"px";for(var a=0;a<t.length;a++)t[a].style.top=s,t[a].style.left=n}))}var l;document.addEventListener("click",(e=>{let t=e.target;document.querySelectorAll(".list-item__select").forEach((e=>{t.parentElement.id==e.dataset.id&&(e.classList.toggle("hidden"),t.parentElement.classList.toggle("active"))}))})),l=function(e){const l=document.createElement("ul");l.className="list";const i=document.createElement("li");i.className="list-item",i.innerHTML='\n        <div class="valute">Валюта</div>\n        <div class="value">Курс</div>\n        <div class="percent">Изменение</div>',app.insertAdjacentElement("afterbegin",l),l.append(i);let c=e.Valute;for(const e in c){let i=c[e];const{CharCode:o,Name:d,Previous:r,Value:p,ID:u}=i;p>r?(t="down",n="&#9660;"):p<r?(t="up",n="&#9650;"):(t="",n="");const v=document.createElement("li");v.className="list-item",v.id=u;let m=(100*(r/p-1)).toFixed(2);v.innerHTML=`\n        <div class="valute">${o}</div>\n        <div class="value">${p}<span class="sign"></span></div>\n        <div class="percent">${m}% <span class="sign ${t}">${n}</span></div>\n        <span class="tooltiptext">${d}</span>\n    `,s(v),l.append(v),a(v)}},fetch(e).then((e=>e.json())).then((e=>{l(e)})).catch(console.error)})();